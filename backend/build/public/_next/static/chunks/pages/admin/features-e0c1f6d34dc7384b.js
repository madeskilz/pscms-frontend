(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{1108:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/features",function(){return s(4053)}])},4053:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var i=s(5893),r=s(7294),n=s(1163),a=s(9478),l=s(610),o=s(990),c=s(762),d=s(1919),u=s(6541),x=s(4677),h=s(6788),f=s(18),p=s(7182),y=s(2857),j=s(4453),m=s(4563),Z=s(5966),g=s(8864);function v(){let[e,t]=(0,r.useState)([]),[s,v]=(0,r.useState)(!0),[b,C]=(0,r.useState)(!1),[_,w]=(0,r.useState)({type:"",text:""}),S=(0,n.useRouter)();(0,r.useEffect)(()=>{F()},[]);let F=async()=>{try{let e=await (0,l.$8)("features");Array.isArray(e)&&t(e)}catch(e){w({type:"error",text:"Failed to load features"})}finally{v(!1)}},k=(s,i)=>r=>{let n=[...e];n[s][i]=r.target.value,t(n)},E=()=>{t([...e,{icon:"âœ¨",title:"",description:""}])},A=s=>{t(e.filter((e,t)=>t!==s))},N=async t=>{if(t.preventDefault(),C(!0),w({type:"",text:""}),!e.every(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.trim()})){w({type:"error",text:"All features must have a title"}),C(!1);return}try{await (0,l.m7)("features",e),w({type:"success",text:"Features saved successfully!"}),setTimeout(()=>{S.push("/admin/settings")},1500)}catch(e){w({type:"error",text:e.message||"Failed to save features"})}finally{C(!1)}};return s?(0,i.jsx)(a.Z,{title:"Features Settings",children:(0,i.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",py:8},children:(0,i.jsx)(p.Z,{})})}):(0,i.jsx)(a.Z,{title:"Features Section Settings",backHref:"/admin/settings",children:(0,i.jsx)(c.Z,{children:(0,i.jsxs)(d.Z,{children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(h.Z,{variant:"h5",gutterBottom:!0,fontWeight:700,color:"primary",children:"Edit Features Section"}),(0,i.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"Manage the features displayed on your homepage. Drag to reorder."})]}),(0,i.jsx)(x.Z,{variant:"contained",startIcon:(0,i.jsx)(m.Z,{}),onClick:E,disabled:b,children:"Add Feature"})]}),_.text&&(0,i.jsx)(f.Z,{severity:_.type,sx:{mb:3},children:_.text}),(0,i.jsxs)(o.Z,{component:"form",onSubmit:N,sx:{mt:3},children:[0===e.length&&(0,i.jsxs)(o.Z,{sx:{textAlign:"center",py:8},children:[(0,i.jsx)(h.Z,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"No features yet"}),(0,i.jsx)(x.Z,{variant:"outlined",startIcon:(0,i.jsx)(m.Z,{}),onClick:E,sx:{mt:2},children:"Add Your First Feature"})]}),e.map((e,t)=>(0,i.jsx)(g.Z,{elevation:2,sx:{p:3,mb:3,borderRadius:2},children:(0,i.jsxs)(o.Z,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[(0,i.jsx)(Z.Z,{sx:{color:"text.secondary",mt:2,cursor:"move"}}),(0,i.jsxs)(o.Z,{sx:{flex:1},children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",gap:2,mb:2},children:[(0,i.jsx)(u.Z,{label:"Icon",value:e.icon,onChange:k(t,"icon"),sx:{width:100},helperText:"Emoji",inputProps:{maxLength:4,style:{fontSize:28,textAlign:"center"}}}),(0,i.jsx)(u.Z,{fullWidth:!0,label:"Feature Title",value:e.title,onChange:k(t,"title"),required:!0})]}),(0,i.jsx)(u.Z,{fullWidth:!0,label:"Description",value:e.description,onChange:k(t,"description"),multiline:!0,rows:2,helperText:"Brief description of this feature"})]}),(0,i.jsx)(y.Z,{color:"error",onClick:()=>A(t),disabled:b,sx:{mt:1},children:(0,i.jsx)(j.Z,{})})]})},t)),e.length>0&&(0,i.jsxs)(o.Z,{sx:{display:"flex",gap:2,mt:4},children:[(0,i.jsx)(x.Z,{type:"submit",variant:"contained",disabled:b,size:"large",sx:{minWidth:120},children:b?(0,i.jsx)(p.Z,{size:24}):"Save Changes"}),(0,i.jsx)(x.Z,{variant:"outlined",onClick:()=>S.push("/admin/settings"),disabled:b,size:"large",children:"Cancel"})]})]})]})})})}}},function(e){e.O(0,[737,736,592,888,179],function(){return e(e.s=1108)}),_N_E=e.O()}]);