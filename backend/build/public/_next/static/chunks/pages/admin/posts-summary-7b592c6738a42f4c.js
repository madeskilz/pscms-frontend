(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[816],{3977:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts-summary",function(){return s(290)}])},290:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var n=s(5893),i=s(7294),a=s(7760),r=s(9478),l=s(5279),o=s(1004),c=s(990),d=s(6788),h=s(8573),x=s(762),u=s(1919),j=s(1873),Z=s(6912),f=s(7182),m=s(4677),p=s(1664),g=s.n(p),y=s(3454);async function b(e){let t=await fetch((y.env.NEXT_PUBLIC_API_BASE||"http://localhost:3001")+"/api/posts/admin/all?limit=200",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to load posts");return t.json()}function v(){let{accessToken:e,loading:t}=(0,a.a)(!0),[s,p]=(0,i.useState)([]),[y,v]=(0,i.useState)(!0),[P,_]=(0,i.useState)("");(0,i.useEffect)(()=>{e&&(v(!0),b(e).then(e=>p(e.data||[])).catch(e=>_(e.message||"Failed to load")).finally(()=>v(!1)))},[e]);let w=(0,i.useMemo)(()=>s.filter(e=>"published"===e.status),[s]),E=(0,i.useMemo)(()=>s.filter(e=>"published"!==e.status),[s]);return t||!e?(0,n.jsx)(l.IZ,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{title:"Posts Summary"}),(0,n.jsxs)(r.Z,{title:"Posts Summary",backHref:"/admin",rightContent:(0,n.jsx)(m.Z,{component:g(),href:"/admin/posts",variant:"outlined",size:"small",children:"Manage Posts"}),children:[(0,n.jsxs)(c.Z,{sx:{mb:4},children:[(0,n.jsx)(d.Z,{variant:"h4",fontWeight:700,children:"Posts Overview"}),(0,n.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"Published vs Draft distribution"})]}),y?(0,n.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,n.jsx)(f.Z,{size:28})," ",(0,n.jsx)(d.Z,{children:"Loading..."})]}):P?(0,n.jsx)(d.Z,{color:"error",variant:"body2",children:P}):(0,n.jsxs)(h.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(x.Z,{elevation:4,children:(0,n.jsxs)(u.Z,{children:[(0,n.jsxs)(d.Z,{variant:"h6",fontWeight:700,children:["Published (",w.length,")"]}),(0,n.jsx)(Z.Z,{sx:{my:2}}),0===w.length&&(0,n.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"No published posts yet."}),(0,n.jsx)(h.ZP,{container:!0,spacing:2,children:w.map(e=>(0,n.jsx)(h.ZP,{item:!0,xs:12,children:(0,n.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(d.Z,{variant:"body2",sx:{fontWeight:600},noWrap:!0,children:e.title||"(Untitled)"}),(0,n.jsx)(j.Z,{size:"small",label:new Date(e.created_at).toLocaleDateString(),color:"success"})]})},e.id))})]})})}),(0,n.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(x.Z,{elevation:4,children:(0,n.jsxs)(u.Z,{children:[(0,n.jsxs)(d.Z,{variant:"h6",fontWeight:700,children:["Drafts (",E.length,")"]}),(0,n.jsx)(Z.Z,{sx:{my:2}}),0===E.length&&(0,n.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"No drafts currently."}),(0,n.jsx)(h.ZP,{container:!0,spacing:2,children:E.map(e=>(0,n.jsx)(h.ZP,{item:!0,xs:12,children:(0,n.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(d.Z,{variant:"body2",sx:{fontWeight:600},noWrap:!0,children:e.title||"(Untitled)"}),(0,n.jsx)(j.Z,{size:"small",label:e.status})]})},e.id))})]})})})]})]})]})}}},function(e){e.O(0,[737,736,592,888,179],function(){return e(e.s=3977)}),_N_E=e.O()}]);