(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{1692:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/navigation",function(){return t(4268)}])},4268:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var l=t(5893),n=t(7294),s=t(7760),r=t(610),i=t(9478),u=t(1032),c=t(990),o=t(6788),d=t(6541),x=t(4677),h=t(2857),f=t(4453),v=t(2591),m=t(18),g=t(1574),b=t(8864);function j(){let{accessToken:e}=(0,s.a)(),[a,t]=(0,n.useState)([]),[j,Z]=(0,n.useState)(!0),[p,k]=(0,n.useState)(!1),[y,_]=(0,n.useState)(null),[C,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=!0;return(0,r.r7)("primary").then(a=>{e&&(t(a.items||[]),Z(!1))}).catch(e=>{_("Failed to load menu"),Z(!1)}),()=>{e=!1}},[]);let S=(0,n.useCallback)((e,a,l)=>{t(t=>t.map((t,n)=>n===e?{...t,[a]:l}:t))},[]),E=(0,n.useCallback)(()=>{t(e=>[...e,{label:"New Link",href:"/",external:!1}])},[]),N=(0,n.useCallback)(e=>{t(a=>a.filter((a,t)=>t!==e))},[]),L=async()=>{k(!0),_(null),w(!1);try{await (0,r._8)("primary",a,e),w(!0);try{localStorage.setItem("menuUpdated",Date.now().toString())}catch(e){}}catch(e){_("Failed to save menu")}finally{k(!1)}};return(0,l.jsx)(i.Z,{title:"Navigation",children:(0,l.jsxs)(u.Z,{maxWidth:"md",sx:{py:4},children:[(0,l.jsx)(o.Z,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Primary Navigation Menu"}),(0,l.jsx)(o.Z,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Add, remove or edit navigation links. External links should include protocol (https://)."}),y&&(0,l.jsx)(m.Z,{severity:"error",sx:{mb:2},children:y}),C&&(0,l.jsx)(m.Z,{severity:"success",sx:{mb:2},children:"Menu saved successfully."}),(0,l.jsxs)(g.Z,{spacing:2,children:[j&&(0,l.jsx)(o.Z,{children:"Loading..."}),!j&&a.map((e,a)=>(0,l.jsxs)(b.Z,{sx:{p:2,display:"flex",gap:2,alignItems:"flex-start"},elevation:2,children:[(0,l.jsx)(d.Z,{label:"Label",value:e.label,size:"small",onChange:e=>S(a,"label",e.target.value),sx:{flex:1}}),(0,l.jsx)(d.Z,{label:"Href",value:e.href,size:"small",onChange:e=>S(a,"href",e.target.value),sx:{flex:1}}),(0,l.jsx)(d.Z,{label:"External (true/false)",value:e.external?"true":"false",size:"small",onChange:e=>S(a,"external","true"===e.target.value),sx:{width:140}}),(0,l.jsx)(h.Z,{"aria-label":"delete",color:"error",onClick:()=>N(a),children:(0,l.jsx)(f.Z,{})})]},a)),(0,l.jsx)(x.Z,{startIcon:(0,l.jsx)(v.Z,{}),variant:"outlined",onClick:E,children:"Add Link"}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(x.Z,{variant:"contained",disabled:p,onClick:L,children:p?"Saving...":"Save Menu"})})]})]})})}}},function(e){e.O(0,[737,736,592,888,179],function(){return e(e.s=1692)}),_N_E=e.O()}]);