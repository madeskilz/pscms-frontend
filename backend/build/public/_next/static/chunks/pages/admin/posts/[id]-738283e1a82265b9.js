(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[647],{2781:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts/[id]",function(){return s(95)}])},95:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var a=s(5893),l=s(7294),n=s(1163),i=s(7760),r=s(610),o=s(9478),u=s(5279),c=s(1004),d=s(990),h=s(6541),p=s(4677),x=s(762),f=s(1919),j=s(6897),g=s(8649),Z=s(5083),v=s(5972),b=s(18),w=s(1574),m=s(8368),y=s(8907),P=s(7985),S=s(4309),C=s(4279),E=s(8443),_=s(5581);function T(){let e=(0,n.useRouter)(),{id:t}=e.query,s="new"===t,{loading:T,accessToken:k}=(0,i.a)(!0),[N,q]=(0,l.useState)(""),[L,H]=(0,l.useState)(""),[R,W]=(0,l.useState)(""),[z,F]=(0,l.useState)("draft"),[I,D]=(0,l.useState)(!1),[M,O]=(0,l.useState)(""),[U,X]=(0,l.useState)(!1),[V,Y]=(0,l.useState)(0);(0,l.useEffect)(()=>{k&&!s&&t&&(async()=>{try{let e=(await (0,r.xl)(t,k)).data;q(e.title||""),H(e.content||""),W(e.slug||""),F(e.status||"draft")}catch(e){O("Failed to load post: "+e.message)}})()},[k,t,s]);let $=(0,l.useCallback)(e=>{let t=e.target.value;q(t),s&&!R&&W(t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},[s,R]),A=async a=>{a.preventDefault(),D(!0),O(""),X(!1);let l={title:N,content:L,slug:R,status:z,type:"post"};try{s?(await (0,r.qb)(l,k),X(!0),setTimeout(()=>e.push("/admin/posts"),1500)):(await (0,r.CP)(t,l,k),X(!0))}catch(e){O(e.message||"Failed to save post")}finally{D(!1)}};return T||!k?(0,a.jsx)(u.IZ,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{title:s?"New Post":"Edit Post"}),(0,a.jsx)(o.Z,{title:s?"New Post":"Edit Post",backHref:"/admin/posts",children:(0,a.jsx)(x.Z,{elevation:3,children:(0,a.jsx)(f.Z,{sx:{p:4},children:(0,a.jsx)(d.Z,{component:"form",onSubmit:A,noValidate:!0,children:(0,a.jsxs)(w.Z,{spacing:3,children:[(0,a.jsx)(h.Z,{fullWidth:!0,required:!0,label:"Post Title",value:N,onChange:$,placeholder:"Enter post title",helperText:"The title of your blog post"}),(0,a.jsx)(h.Z,{fullWidth:!0,required:!0,label:"URL Slug",value:R,onChange:e=>W(e.target.value),placeholder:"url-friendly-slug",helperText:"URL-friendly unique identifier (auto-generated from title)"}),(0,a.jsxs)(d.Z,{children:[(0,a.jsxs)(m.Z,{value:V,onChange:(e,t)=>Y(t),sx:{mb:2},children:[(0,a.jsx)(y.Z,{icon:(0,a.jsx)(C.Z,{}),label:"Edit",iconPosition:"start"}),(0,a.jsx)(y.Z,{icon:(0,a.jsx)(E.Z,{}),label:"Preview",iconPosition:"start"})]}),0===V?(0,a.jsx)(h.Z,{fullWidth:!0,multiline:!0,rows:12,label:"Post Content",value:L,onChange:e=>H(e.target.value),placeholder:"Enter post content (HTML supported)",helperText:"HTML is supported. You can use tags like <p>, <h2>, <ul>, <img>, etc."}):(0,a.jsx)(_.Z,{content:L||"<p>No content to preview yet. Switch to Edit tab to add content.</p>",maxHeight:"500px"})]}),(0,a.jsxs)(j.Z,{fullWidth:!0,children:[(0,a.jsx)(g.Z,{children:"Status"}),(0,a.jsxs)(Z.Z,{value:z,label:"Status",onChange:e=>F(e.target.value),children:[(0,a.jsx)(v.Z,{value:"draft",children:"Draft"}),(0,a.jsx)(v.Z,{value:"published",children:"Published"})]})]}),M&&(0,a.jsx)(b.Z,{severity:"error",onClose:()=>O(""),children:M}),U&&(0,a.jsxs)(b.Z,{severity:"success",children:["Post saved successfully! ",s&&"Redirecting..."]}),(0,a.jsxs)(w.Z,{direction:"row",spacing:2,children:[(0,a.jsx)(p.Z,{type:"submit",variant:"contained",size:"large",disabled:I||!N||!R,startIcon:(0,a.jsx)(P.Z,{}),children:I?"Saving...":"Save Post"}),(0,a.jsx)(p.Z,{variant:"outlined",size:"large",onClick:()=>e.push("/admin/posts"),startIcon:(0,a.jsx)(S.Z,{}),children:"Cancel"})]})]})})})})})]})}}},function(e){e.O(0,[737,736,592,888,179],function(){return e(e.s=2781)}),_N_E=e.O()}]);