(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{4608:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts",function(){return n(3411)}])},3411:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var s=n(5893),i=n(7294),r=n(1664),a=n.n(r),o=n(7760),l=n(75),c=n(9478),d=n(5279),x=n(1004),h=n(990),j=n(6788),p=n(4677),u=n(8573),Z=n(762),f=n(1919),m=n(1873),g=n(1574),y=n(2857),w=n(8006),_=n(4563),v=n(4279),b=n(4453);let P=(0,i.memo)(function(e){let{post:t,onDelete:n}=e;return(0,s.jsx)(u.ZP,{item:!0,xs:12,children:(0,s.jsx)(Z.Z,{elevation:3,children:(0,s.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:2},children:[(0,s.jsxs)(h.Z,{sx:{flex:1,minWidth:0},children:[(0,s.jsx)(j.Z,{variant:"h6",fontWeight:700,noWrap:!0,gutterBottom:!0,children:t.title||"(Untitled)"}),(0,s.jsxs)(g.Z,{direction:"row",spacing:2,sx:{color:"text.secondary"},children:[(0,s.jsx)(m.Z,{size:"small",label:t.status,color:"published"===t.status?"success":"default"}),(0,s.jsx)(j.Z,{variant:"caption",title:t.slug,noWrap:!0,children:t.slug}),(0,s.jsx)(j.Z,{variant:"caption",children:new Date(t.created_at).toLocaleDateString()})]})]}),(0,s.jsxs)(g.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(w.Z,{title:"Edit",children:(0,s.jsx)(y.Z,{component:a(),href:"/admin/posts/".concat(t.id),color:"primary",children:(0,s.jsx)(v.Z,{})})}),(0,s.jsx)(w.Z,{title:"Delete",children:(0,s.jsx)(y.Z,{color:"error",onClick:()=>n(t.id),children:(0,s.jsx)(b.Z,{})})})]})]})})})});function k(){let{loading:e,accessToken:t}=(0,o.a)(!0),{posts:n,loading:i,remove:r}=(0,l.k)(t),m=async e=>{if(confirm("Delete this post?"))try{await r(e)}catch(e){alert("Failed to delete post")}};return e||!t?(0,s.jsx)(d.IZ,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{title:"Manage Posts"}),(0,s.jsxs)(c.Z,{title:"Posts",backHref:"/admin",children:[(0,s.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,s.jsx)(j.Z,{variant:"h4",fontWeight:700,children:"Posts"}),(0,s.jsxs)(h.Z,{sx:{display:"flex",gap:1},children:[(0,s.jsx)(p.Z,{component:a(),href:"/admin/posts-summary",variant:"outlined",children:"Summary"}),(0,s.jsx)(p.Z,{component:a(),href:"/admin/posts/new",variant:"contained",startIcon:(0,s.jsx)(_.Z,{}),children:"New Post"})]})]}),i?(0,s.jsx)(j.Z,{children:"Loading posts..."}):0===n.length?(0,s.jsx)(Z.Z,{elevation:2,children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(j.Z,{variant:"body1",color:"text.secondary",children:"No posts yet. Create your first post!"})})}):(0,s.jsx)(u.ZP,{container:!0,spacing:3,sx:{mt:0},children:n.map(e=>(0,s.jsx)(P,{post:e,onDelete:m},e.id))})]})]})}}},function(e){e.O(0,[737,736,592,888,179],function(){return e(e.s=4608)}),_N_E=e.O()}]);