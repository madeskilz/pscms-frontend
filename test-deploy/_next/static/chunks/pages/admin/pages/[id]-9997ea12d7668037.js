(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{5670:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/pages/[id]",function(){return a(2165)}])},2165:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});var s=a(5893),n=a(7294),l=a(1163),i=a(7760),r=a(610),u=a(9478),c=a(5279),o=a(1004),d=a(990),h=a(6541),g=a(4677),p=a(762),x=a(1919),j=a(6897),f=a(8649),Z=a(5083),v=a(5972),b=a(18),w=a(1574),m=a(8368),y=a(8907),C=a(7985),P=a(4309),S=a(4279),E=a(8443),_=a(5581);function T(){let e=(0,l.useRouter)(),{id:t}=e.query,a="new"===t,{loading:T,accessToken:k}=(0,i.a)(!0),[N,q]=(0,n.useState)(""),[L,H]=(0,n.useState)(""),[R,W]=(0,n.useState)(""),[z,F]=(0,n.useState)("draft"),[I,U]=(0,n.useState)(!1),[D,M]=(0,n.useState)(""),[O,X]=(0,n.useState)(!1),[A,V]=(0,n.useState)(0);(0,n.useEffect)(()=>{k&&!a&&t&&(async()=>{try{let e=(await (0,r.xl)(t,k)).data;q(e.title||""),H(e.content||""),W(e.slug||""),F(e.status||"draft")}catch(e){M("Failed to load page: "+e.message)}})()},[k,t,a]);let Y=(0,n.useCallback)(e=>{let t=e.target.value;q(t),a&&!R&&W(t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},[a,R]),$=async s=>{s.preventDefault(),U(!0),M(""),X(!1);let n={title:N,content:L,slug:R,status:z,type:"page"};try{a?(await (0,r.qb)(n,k),X(!0),setTimeout(()=>e.push("/admin/pages"),1500)):(await (0,r.CP)(t,n,k),X(!0))}catch(e){M(e.message||"Failed to save page")}finally{U(!1)}};return T||!k?(0,s.jsx)(c.IZ,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{title:a?"New Page":"Edit Page"}),(0,s.jsx)(u.Z,{title:a?"New Page":"Edit Page",backHref:"/admin/pages",children:(0,s.jsx)(p.Z,{elevation:3,children:(0,s.jsx)(x.Z,{sx:{p:4},children:(0,s.jsx)(d.Z,{component:"form",onSubmit:$,noValidate:!0,children:(0,s.jsxs)(w.Z,{spacing:3,children:[(0,s.jsx)(h.Z,{fullWidth:!0,required:!0,label:"Page Title",value:N,onChange:Y,placeholder:"Enter page title",helperText:"The title of your page (e.g., About Us, Contact)"}),(0,s.jsx)(h.Z,{fullWidth:!0,required:!0,label:"URL Slug",value:R,onChange:e=>W(e.target.value),placeholder:"url-friendly-slug",helperText:"URL-friendly unique identifier (e.g., about-us, contact)"}),(0,s.jsxs)(d.Z,{children:[(0,s.jsxs)(m.Z,{value:A,onChange:(e,t)=>V(t),sx:{mb:2},children:[(0,s.jsx)(y.Z,{icon:(0,s.jsx)(S.Z,{}),label:"Edit",iconPosition:"start"}),(0,s.jsx)(y.Z,{icon:(0,s.jsx)(E.Z,{}),label:"Preview",iconPosition:"start"})]}),0===A?(0,s.jsx)(h.Z,{fullWidth:!0,multiline:!0,rows:12,label:"Page Content",value:L,onChange:e=>H(e.target.value),placeholder:"Enter page content (HTML supported)",helperText:"HTML is supported. You can use tags like <p>, <h2>, <ul>, etc."}):(0,s.jsx)(_.Z,{content:L||"<p>No content to preview yet. Switch to Edit tab to add content.</p>",maxHeight:"500px"})]}),(0,s.jsxs)(j.Z,{fullWidth:!0,children:[(0,s.jsx)(f.Z,{children:"Status"}),(0,s.jsxs)(Z.Z,{value:z,label:"Status",onChange:e=>F(e.target.value),children:[(0,s.jsx)(v.Z,{value:"draft",children:"Draft"}),(0,s.jsx)(v.Z,{value:"published",children:"Published"})]})]}),D&&(0,s.jsx)(b.Z,{severity:"error",onClose:()=>M(""),children:D}),O&&(0,s.jsxs)(b.Z,{severity:"success",children:["Page saved successfully! ",a&&"Redirecting..."]}),(0,s.jsxs)(w.Z,{direction:"row",spacing:2,children:[(0,s.jsx)(g.Z,{type:"submit",variant:"contained",size:"large",disabled:I||!N||!R,startIcon:(0,s.jsx)(C.Z,{}),children:I?"Saving...":"Save Page"}),(0,s.jsx)(g.Z,{variant:"outlined",size:"large",onClick:()=>e.push("/admin/pages"),startIcon:(0,s.jsx)(P.Z,{}),children:"Cancel"})]})]})})})})})]})}}},function(e){e.O(0,[737,736,592,888,179],function(){return e(e.s=5670)}),_N_E=e.O()}]);